<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8" />
    <title>System sprawdzania jakości powietrza OpenAQ</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-LN+7fdVzj6u52u30Kp6M/trliBMCMKTyK833zpbD+pXdCLuTusPj697FH4R/5mcr" crossorigin="anonymous" />
</head>
<body>
<nav class="navbar navbar-expand-lg bg-body-tertiary">
  <div class="container-fluid">
    <a class="navbar-brand" href="{{ url_for('main_page.index') }}">AirQ Main</a>
    <div id="navbarSupportedContent">
      <ul class="nav justify-content-end">
        <li class="nav-item">
          <a class="nav-link {% if request.endpoint == 'main_page.index' %}active{% endif %}" href="{{ url_for('main_page.index') }}">Strona główna</a>
        </li>
        <li class="nav-item">
          <a class="nav-link {% if request.endpoint == 'main_page.historia' %}active{% endif %}" href="{{ url_for('main_page.historia') }}">Historia</a>
        </li>
      </ul>
    </div>
  </div>
</nav>

<div style="display: flex; justify-content: center; align-items: center; height: 20vh;">
  <h1>Witaj na stronie pokazującej jakość powietrza w danym obszarze</h1>
</div>

<div class="mt-5 d-flex justify-content-around flex-end container">
  <div>
      <form method="get">
        <h1>Podaj nazwę miasta</h1>
        <div>
          <label for="imie">Miasto:</label>
          <input type="text" id="imie" name="imie" placeholder="Wpisz nazwę miasta" required
                 value="{{ city if city }}">
        </div>
        <div>
            <button type="submit">Wyślij formularz</button>
        </div>
      </form>
  </div>
</div>

<div class="container mt-5">
  {% if error %}
    <div class="alert alert-danger" role="alert">
      {{ error }}
    </div>
  {% endif %}

  {% if data %}
    <h2 class="text-center mb-4">Wynik wyszukiwania dla miasta: {{ data.city }}</h2>
<table class="table table-striped">
  <thead>
    <tr>
      <th>Miasto</th>
      <th>ID Lokalizacji</th>
      <th>Nazwa Lokalizacji</th>
      <th>Sensor ID</th>
      <th>Data pomiaru</th>
      <th>Parametr</th>
      <th>Wartość</th>
      <th>Ocena jakości</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>{{ data.city }}</td>
      <td>{{ data.location_id if data.location_id else "-" }}</td>
      <td>{{ data.location_name }}</td>
      <td>{{ data.sensor_id }}</td>
      <td>{{ data.date }}</td>
      <td>{{ data.parameter }}</td>
      <td>{{ data.value }}</td>
      <td>{{ data.rating if data.rating else "-" }}</td>
    </tr>
  </tbody>
</table>

  {% elif city %}
    <p class="text-center">Brak danych do wyświetlenia.</p>
  {% endif %}
</div>

</body>
</html>
